---
layout: post
title: AWS RDS
date: 2024-08-12
category: AWS
---

# AWS

> AWS DVA-C02 시험 공부 과정을 블로그에 기록하고자 한다!! <br>
> 강의는 [udemy](https://www.udemy.com/share/105Hxw3@0cQdz1131EH9l6miYRGC7Z2Im8bmTMdAo7U-M_IUQA0101eYlVeFerKpk6CkYQwlDA==/) 강의를 참고하였다.

<br>

# RDS
- 관계형 데이터베이스의 약자로 SQL을 쿼리 언어로 사용하는 데이터베이스에 대한 관리형 데이터베이스 서비스이다. 
- AWS에서 관리하는 데이터베이스 엔진
  - Postgres
  - mysql
  - mariadb
  - oracle
  - microsoft sql server
  - ibm db2
  - aurora(AWS의 독점 데이터베이스)

#### RDS 사용 이유?
- EC2 인스턴스에 자체 데이터베이스 서비스를 구축하는 대신 RDS를 사용하는 이유는 **RDS는 관리형 서비스**이기 때문이다. 따라서 데이터베이스를 제공하는 것 이외에도 많은 서비스를 제공한다. 
  - 자동화된 데이터베이스 프로비저닝을 제공한다.
  - 지속적인 백업이 이뤄지고 복원이 가능하다.
  - 모니터링 대시보드를 제공한다.
  - 읽기 복제본이 가능하다.
  - 읽기 성능을 향상시키기 위해 다중 가용 영역을 설정할 수 있다. 
  - 업그레이드를 위한 유지보수 이 있다.
  - 스케일링이 가능하다
  - 스토리지는 EBS 지원을 받는다. 

#### RDS 스토리지 오토 스케일링
- 만약 RDS 초기 설정한 스토리지 용량보다 DB 사용량이 많아서 여유 공간이 부족할 때, RDS 스토리지가 자동으로 스케일링 되는 기능이다. 스토리지를 늘리기 위해 데이터베이스 중단하는 작업을 하지 않아도 된다. 
- 최대 저장 임계값을 설정해야 한다. 
- 할당된 저장 공간의 10% 미만이 남고, 부족한 저장 공간이 5분 이상 지속되거나 마지막 수정 이후 6시간이 지났을 경우 저장공간 오토 스케일링이 가능하다.
- 예측할 수 없은 작업량을 가진 애플리케이션에 유용하다.

![alt text](\public\img\aws15-1.png){: width="200" height ="30" }


# RDS 읽기 전용 복제본
- 읽기 전용 복제본을 5개까지 생성할 수 있다.  
- 동일한 가용영역이나 리전을 걸쳐서 생성될 수 있다.
- 주 데이터베이스와 읽기 전용 복제본 사이에 비동기식 복제가 발생한다. 
- 복제본을 데이터베이스로 사용하고자 하며 그에 대한 권한을 설정하면 데이터베이스로 승격할 수 있다.
- 읽기 전용복제본인 경우 CUD는 불가능하고 READ만 가능하다.

  ![alt text](\public\img\aws15-2.png){: width="350" height ="30" }

#### RDS 읽기 전용 복제본 네트워킹 비용
- 하나의 가용 영역에서 다른 가용 영역으로 데이터가 이동할 때 비용이 발생한다. 
- RDS 읽기 전용 복제본은 다른 가용영역이지만 동일한 리전 내에 있을 때 비용이 발생하지 않는다.

  ![alt text](\public\img\aws15-3.png){: width="350" height ="30" }
 
#### RDS 다중 AZ
- 동기 방식 복제
- 하나의 DNS 이름을 갖는다. 애플리케이션도 하나의 DNS 이름으로 통신하기 때문에 마스터에 문제가 생길 때도 스탠바이 데이터베이스에 자동으로 장애 조치가 수행된다.
- 가용성을 높일 수 있다. 
- 전체 AZ또는 네트워크가 손실될 때에 대비한 장애 대비 조치이다.
  - 장애 발생시 마스터로 승격되는것도 자동이다. 
- 스케일링에 이용되지 않는다. 
- 재해 복구를 대비해서 읽기 전용 복제본을 다중 AZ로 설정할 수 있다. 

